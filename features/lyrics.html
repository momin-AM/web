<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>for my ISHAMONI</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* main lyric glow color */
            --lyric-glow: 255, 122, 162;
            /* soft neon pink (R, G, B) */
        }

        * {
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(120deg, #0f0c29, #302b63, #24243e);
            background-size: 400% 400%;
            animation: bgShift 14s ease infinite;
            color: white;
            overflow: hidden;
        }

        @keyframes bgShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .glow {
            position: absolute;
            width: 520px;
            height: 520px;
            background: radial-gradient(circle, rgba(255, 45, 85, 0.4), transparent 70%);
            filter: blur(110px);
            opacity: 0.7;
            animation: float 10s ease-in-out infinite;
        }

        .glow-1 {
            background: radial-gradient(circle, rgba(255, 122, 162, 0.45), transparent 70%);
            top: -120px;
            left: -120px;
        }

        .glow-2 {
            background: radial-gradient(circle, rgba(179, 136, 255, 0.4), transparent 70%);
            bottom: -140px;
            right: -120px;
            animation-delay: 3s;
        }

        .glow-3 {
            background: radial-gradient(circle, rgba(60, 242, 255, 0.35), transparent 70%);
            top: 40%;
            left: 60%;
            animation-delay: 6s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-45px);
            }
        }

        .player {
            width: 380px;
            max-width: 92vw;
            height: 75vh;
            max-height: 620px;
            text-align: center;
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .play-btn {
            margin-bottom: 14px;
            width: 72px;
            height: 72px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff2d55, #ff7a18);
            display: flex;
            align-items: center;
            justify-content: center;

            margin: 0 auto 22px;
            transform: translateY(-18px);
            /* üëà move up */

            cursor: pointer;
            box-shadow: 0 12px 36px rgba(255, 45, 85, 0.65);
            transition: transform 0.2s ease;
        }


        .play-btn:hover {
            transform: scale(1.08);
        }

        .play-icon {
            width: 0;
            height: 0;
            border-left: 22px solid white;
            border-top: 14px solid transparent;
            border-bottom: 14px solid transparent;
            margin-left: 4px;
        }

        .lyrics {
            height: 52vh;
            /* üëà fills available space */
            width: 100%;

            margin-top: 8px;
            padding-bottom: 48px;

            overflow-y: auto;
            scroll-behavior: smooth;
            scrollbar-width: none;

            opacity: 0;
            transform: translateY(25px);
            transition: opacity 0.7s ease, transform 0.7s ease;
        }

        .lyrics::-webkit-scrollbar {
            display: none;
        }


        .lyrics.show {
            opacity: 1;
            transform: translateY(0);
        }

        .line {
            font-size: 24px;
            line-height: 1.9;
            color: rgba(255, 255, 255, 0.35);
            /* fade via color, NOT opacity */
            transform: translateY(6px);
            transition: color 0.4s ease, transform 0.4s ease;
            animation: lineIn 0.6s ease both;
        }


        @keyframes lineIn {
            from {
                opacity: 0;
                transform: translateY(14px) scale(0.96);
            }

            to {
                opacity: inherit;
                transform: translateY(0) scale(1);
            }

        }
.line.active {
    color: white; /* fallback color */
    background: linear-gradient(
        90deg,
        rgb(var(--lyric-glow)),
        rgba(var(--lyric-glow), 0.65)
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;

    text-shadow:
        0 0 6px rgba(var(--lyric-glow), 0.65),
        0 0 12px rgba(var(--lyric-glow), 0.35),
        0 0 18px rgba(var(--lyric-glow), 0.25);

    animation: lineGlowPulse 1.2s ease-in-out infinite alternate;
}
@keyframes lineGlowPulse {
    0% {
        text-shadow:
            0 0 6px rgba(var(--lyric-glow), 0.65),
            0 0 12px rgba(var(--lyric-glow), 0.35),
            0 0 18px rgba(var(--lyric-glow), 0.25);
    }
    50% {
        text-shadow:
            0 0 12px rgba(var(--lyric-glow), 0.8),
            0 0 20px rgba(var(--lyric-glow), 0.45),
            0 0 28px rgba(var(--lyric-glow), 0.35);
    }
    100% {
        text-shadow:
            0 0 6px rgba(var(--lyric-glow), 0.65),
            0 0 12px rgba(var(--lyric-glow), 0.35),
            0 0 18px rgba(var(--lyric-glow), 0.25);
    }
}

        .line.past {
            color: rgba(255, 255, 255, 0.2);
        }


        .word {
            opacity: 1;
            transition: all 0.25s ease;
        }

        .word.active {
            background: linear-gradient(90deg,
                    rgb(var(--lyric-glow)),
                    rgba(var(--lyric-glow), 0.65));

            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;

            text-shadow:
                0 0 6px rgba(var(--lyric-glow), 0.65),
                0 0 12px rgba(var(--lyric-glow), 0.35);

            transition:
                background 0.25s ease,
                text-shadow 0.25s ease;
        }


        .song-title {
            margin-top: 10px;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            /* tighter */
            transform: translateY(-60px);
            /* üëà push up */
            background: linear-gradient(90deg,
                    rgb(var(--lyric-glow)),
                    #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;

            text-shadow:
                0 0 10px rgba(var(--lyric-glow), 0.45);
        }

        .credit {
            margin-top: 14px;
            /* closer to lyrics */
            font-size: 14px;
            letter-spacing: 0.14em;
            text-transform: lowercase;
            opacity: 0.6;

            background: linear-gradient(90deg,
                    rgba(var(--lyric-glow), 0.7),
                    rgba(255, 255, 255, 0.6));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;

            text-shadow:
                0 0 6px rgba(var(--lyric-glow), 0.25);
        }

        .center {
            flex: 1;
            /* üëà occupies middle space */
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* ---------- BACK BUTTON ---------- */
        .back-btn {
            position: absolute;
            top: 22px;
            left: 22px;
            z-index: 5;

            width: 44px;
            height: 44px;
            border-radius: 50%;

            display: flex;
            align-items: center;
            justify-content: center;

            font-size: 22px;
            font-weight: 600;

            cursor: pointer;

            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.25);

            color: white;

            box-shadow:
                0 0 18px rgba(var(--lyric-glow), 0.35);

            transition:
                transform 0.25s ease,
                box-shadow 0.25s ease,
                background 0.25s ease;
        }

        .back-btn:hover {
            transform: scale(1.12) translateX(-3px);
            background: rgba(255, 255, 255, 0.18);

            box-shadow:
                0 0 28px rgba(var(--lyric-glow), 0.65),
                0 0 50px rgba(var(--lyric-glow), 0.35);
        }

        .back-btn:active {
            transform: scale(0.96);
        }
    </style>
</head>

<body>
    <div class="back-btn" onclick="goBack()">
        ‚Üê
    </div>

    <div class="glow glow-1"></div>
    <div class="glow glow-2"></div>
    <div class="glow glow-3"></div>

    <div class="player">
        <div class="song-title">Ishamoni3</div>

                <div class="center">
                    <div class="play-btn" id="playBtn">
                        <div class="play-icon"></div>
                    </div>

                    <div class="lyrics" id="lyrics"></div>
                </div>

                <div class="credit">Dedicated to Ishaaamoniii</div>
        </div>
        <audio id="audio" preload="auto">
            <source src="songs/MyIshaaV5.mp3" type="audio/mpeg">
        </audio>


        <script src="songs.js"></script>


        <script>
            function goBack() {
                window.location.href = "index.html";
            }

            const audio = document.getElementById("audio");
            const lyricsEl = document.getElementById("lyrics");
            const playBtn = document.getElementById("playBtn");

            let raf;
            let playing = false;
            let finished = false;

            const songId = localStorage.getItem("selectedSong");
            const song = SONGS[songId];

            if (!song) {
                alert("No song selected");
                location.href = "index.html";
            }

            audio.src = song.audio;
            document.title = song.title;

            const lyricsData = song.lyricsData;

            /* ---------- BUILD DOM ---------- */
            // Create line elements for each lyric line
            lyricsData.forEach((line) => {
                const div = document.createElement("div");
                div.className = "line";
                div.textContent = line.text;
                lyricsEl.appendChild(div);
            });

            const lines = document.querySelectorAll(".line");

            /* ---------- SYNC FUNCTION ---------- */
            function syncLyrics() {
                const t = audio.currentTime;

                lines.forEach((lineEl, i) => {
                    const lineTime = lyricsData[i].time;
                    const nextLineTime = lyricsData[i + 1]?.time ?? Infinity;

                    // Highlight only the current line
                    if (t >= lineTime && t < nextLineTime) {
                        lineEl.classList.add("active");
                        lineEl.classList.remove("past");
                    } else if (t >= nextLineTime) {
                        lineEl.classList.add("past");
                        lineEl.classList.remove("active");
                    } else {
                        lineEl.classList.remove("active", "past");
                    }
                });

                // Scroll active line into view
                const activeLine = document.querySelector(".line.active");
                if (activeLine) {
                    lyricsEl.scrollTo({
                        top: activeLine.offsetTop - lyricsEl.clientHeight * 0.45,
                        behavior: "smooth"
                    });
                }

                raf = requestAnimationFrame(syncLyrics);
            }

            /* ---------- PLAY / PAUSE / RESTART ---------- */
            playBtn.addEventListener("click", () => {
                // restart if finished
                if (finished) {
                    audio.currentTime = 0;
                    finished = false;
                }

                if (!playing) {
                    audio.play();
                    lyricsEl.classList.add("show");
                    raf = requestAnimationFrame(syncLyrics);
                    playing = true;
                } else {
                    audio.pause();
                    cancelAnimationFrame(raf);
                    playing = false;
                }
            });

            /* ---------- WHEN SONG ENDS ---------- */
            audio.addEventListener("ended", () => {
                cancelAnimationFrame(raf);
                playing = false;
                finished = true;
            });
        </script>

</body>

</html>
