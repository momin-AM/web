<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Momin's Adda - Homepage</title>
  <style>
    /* Reset and base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: #000;
      color: #fff;
      font-family: 'Courier New', monospace;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Hamburger Menu and Navigation Styles */
    .top-nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(26, 32, 44, 0.95);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 2rem;
      z-index: 1000;
      border-bottom: 1px solid #00ff99;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .hamburger {
      display: flex;
      flex-direction: column;
      cursor: pointer;
      gap: 4px;
    }

    .hamburger span {
      width: 25px;
      height: 3px;
      background: #00ff99;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    .site-title {
      font-weight: bold;
      font-size: 1.3rem;
      color: #00ff99;
      letter-spacing: 1px;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
    }

    .nav-links a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }

    .nav-links a:hover {
      color: #00ffcc;
    }

    /* Sidebar Styles */
    #sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 250px;
      height: 100vh;
      background: linear-gradient(135deg, #2d3748, #1a202c);
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      z-index: 1001;
      padding-top: 80px;
      box-shadow: 2px 0 15px rgba(0, 255, 153, 0.3);
    }

    #sidebar.active {
      transform: translateX(0);
    }

    #sidebar a {
      display: block;
      color: #fff;
      padding: 1rem 2rem;
      text-decoration: none;
      border-bottom: 1px solid rgba(0, 255, 153, 0.2);
      transition: all 0.2s;
    }

    #sidebar a:hover {
      background: rgba(0, 255, 204, 0.1);
      color: #00ffcc;
      padding-left: 2.5rem;
    }

    .sidebar-close {
      position: absolute;
      top: 20px;
      right: 20px;
      color: #00ff99;
      font-size: 2rem;
      cursor: pointer;
      font-weight: bold;
    }

    /* Main content styles */
    header {
      text-align: center;
      margin-top: 120px;
    }

    h1 {
      font-size: 2.5rem;
      color: #00ff99;
      margin-bottom: 10px;
    }

    p {
      font-size: 1.1rem;
      color: #ccc;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, 150px);
      gap: 20px;
      margin: 40px 0;
    }

    .grid a {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      text-align: center;
      font-weight: bold;
      text-decoration: none;
      color: #00ffff;
      border: 1px solid rgba(0, 255, 255, 0.6);
      background-color: rgba(0, 255, 255, 0.1);
      backdrop-filter: blur(6px);
      border-radius: 16px;
      transition: all 0.2s ease-in-out;
    }

    .grid a:hover {
      background-color: #00ffff;
      color: #000;
      box-shadow: 0 0 15px #00ffff;
    }

    .msg-box {
      margin-top: 40px;
      text-align: center;
      width: 80%;
    }

    .msg-box input[type="text"] {
      width: 70%;
      padding: 10px;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      margin-bottom: 10px;
    }

    .msg-box button {
      padding: 10px 20px;
      font-size: 1rem;
      background-color: #00ffcc;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .msg-box button:hover {
      background-color: #00c2a8;
    }

    footer {
      margin-top: 60px;
      font-size: 0.9rem;
      color: #666;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }
      
      .top-nav {
        padding: 1rem;
      }

      .grid {
        grid-template-columns: 1fr;
        gap: 15px;
        width: 90%;
      }

      .grid a {
        padding: 15px;
      }
    }

    /* Events Section Container */
.events-section {
  width: 100%;
  max-width: 1200px;
  margin: 60px auto;
  padding: 2rem;
  background: linear-gradient(135deg, rgba(0, 255, 153, 0.1), rgba(0, 255, 255, 0.05));
  border: 1px solid rgba(0, 255, 153, 0.3);
  border-radius: 20px;
  backdrop-filter: blur(10px);
}

.events-section h2 {
  color: #00ff99;
  font-size: 2rem;
  text-align: center;
  margin-bottom: 2rem;
  text-shadow: 0 0 10px rgba(0, 255, 153, 0.5);
}

@media (max-width: 768px) {
  .events-section {
    margin: 40px 1rem;
    padding: 1.5rem;
  }
}

    
  </style>
</head>
<body>
  <!-- Top Navigation Bar -->
  <nav class="top-nav">
    <div class="nav-left">
      <div class="hamburger" onclick="toggleSidebar()">
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div class="site-title">Momin's Adda</div>
    </div>
    <div class="nav-links">
      <a href="./index.html">Home</a>
      <a href="features/info.html">About</a>
      <a href="features/websites.html">Projects</a>
      <a  onclick="composeGmail()" style="cursor:pointer;text-decoration:none;">Contact</a>
    </div>
  </nav>

  <!-- Sidebar Menu -->
  <div id="sidebar">
    <span class="sidebar-close" onclick="toggleSidebar()">&times;</span>
    <a href="https://www.instagram.com/momin_ali_mandal" target="_blank" style="cursor: pointer; text-decoration: none;">üë§ About Me</a>
    <a href="https://sh1nch4n-nohara.github.io/chat/" target="_blank">üí¨ChatApp</a>
    <a href="https://testlove-tme0.onrender.com/" target="_blank">ü´Ç Test partner</a>
    <a href="https://findimposter.onrender.com/" target="_blank">üí¨ chat game</a>
    <a href="https://solarsystem-8x70.onrender.com/" target="_blank">üåêSolar system</a>
     <a href="features/eventPage.html">üåÉEvent celeb</a>
    <a onclick="composeGmail()" style="cursor:pointer;text-decoration:none;">üìß Contact</a>
    
    <a href="#" onclick="checkAdminAccess()">‚öôÔ∏è Admin</a>

  </div>

  <header>
    <h1>Welcome to Momin's Adda</h1>
    <p>Explore my world ‚Äì Pick an option below:</p>
  </header>

  <div class="grid">
    <a href="features/info.html">My Info</a>
    <a href="features/events.html">Events</a>
    <a href="features/creations.html">pc apps</a>
    <a href="features/websites.html">My Websites</a>
    <a href="features/calculator.html">calculator</a>
    <a href="features/weather.html">weather</a>
    <a href="features/chatroom.html">Chatroom</a>
    <a href="#msgbox">Msg me</a>
  </div>

  <div class="msg-box" id="msgbox">
    <h2 style="color:#00ffcc;">Send Me an Anonymous Message</h2>
    <input type="text" id="msgInput" placeholder="Type your message..." />
    <br />
    <button onclick="showMessage()">Send</button>
  </div>

<!-- Events Section -->
<section class="events-section" id="events">
  <h2>üìÖ Events</h2>
  <iframe src="features/events.html" width="100%" height="600" frameborder="0" style="border-radius: 10px; background: transparent;"></iframe>
</section>

  <footer>
    <p>¬© 2025 Momin's Adda</p>
  </footer>


  <script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
    import { getAuth, sendSignInLinkToEmail, isSignInWithEmailLink, signInWithEmailLink } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

    import { firebaseConfig } from './features/firebaseConfig.js';

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    function getCurrentDateTime() {
      let now = new Date();
      let dateParts = now.toISOString().split("T")[0].split("-");
      let formattedDate = `${dateParts[1]}-${dateParts[2]}`;
      let options = { hour: "numeric", minute: "numeric", second: "numeric", hour12: true };
      let formattedTime = now.toLocaleTimeString(undefined, options);
      return { date: formattedDate, time: formattedTime };
    }

    window.showMessage = async function () {
      let msg = document.getElementById("msgInput").value;
      let { date, time } = getCurrentDateTime();
      if (msg.trim() === "") {
        alert("Please enter a message!");
        return;
      }

      try {
        await addDoc(collection(db, "messages"), {
          text: msg,
          date: date,
          time: time
        });
        alert("Message sent successfully!");
        document.getElementById("msgInput").value = "";
      } catch (error) {
        console.error("Error saving message:", error);
      }
    };

    function saveVisitor(ip, date, time) {
      addDoc(collection(db, "visitors"), {
        ip,
        date,
        time,
        createdAt: serverTimestamp() // ‚Üê Add this line to enable reliable sorting
      })
        .then(() => console.log("new"))
        .catch((error) => console.error("Error saving IP:", error));
    }
    window.addEventListener("load", () => {
      const hasVisited = localStorage.getItem("ipLogged");

      if (hasVisited) {
        console.log("old");
        return; // skip logging again
      }

      fetch("https://ipapi.co/json/")
        .then(res => res.json())
        .then(data => {
          let ip = data.ip;
          let now = new Date();
          let time = now.toLocaleTimeString();
          let date = now.toLocaleDateString();
          saveVisitor(ip, date, time);
          localStorage.setItem("ipLogged", "true"); // mark as logged
        })
        .catch(err => console.error("IP fetch failed:", err));
    });

    // Hamburger Menu Functionality
    window.toggleSidebar = function () {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('active');
    }

    // Close sidebar when clicking outside
    document.addEventListener('click', function (e) {
      const sidebar = document.getElementById('sidebar');
      const hamburger = document.querySelector('.hamburger');

      if (sidebar.classList.contains('active') &&
        !sidebar.contains(e.target) &&
        !hamburger.contains(e.target)) {
        sidebar.classList.remove('active');
      }
    });

    // Firebase Auth setup
    const auth = getAuth(app);

    // Admin OTP System - Sends OTP to fixed admin email
    // Temporary admin access (replace your checkAdminAccess function)
    window.checkAdminAccess = function () {
      const password = prompt("Enter admin password:");

      if (password === null) {
        return; // User cancelled
      }

      // Temporary password - change this to whatever you want
      const correctPassword = "admin123";

      if (password === correctPassword) {
        // Set a temporary admin session
        localStorage.setItem('adminAccess', 'granted');
        window.location.href = "admin/admin.html";
      } else {
        alert("‚ùå Incorrect password! Access denied.");
      }
    }


    // Check if user is coming back from email link
    window.addEventListener('load', function () {
      if (isSignInWithEmailLink(auth, window.location.href)) {
        const adminEmail = "darkseener45@gmail.com"; // Use the same fixed email

        signInWithEmailLink(auth, adminEmail, window.location.href)
          .then((result) => {
            localStorage.removeItem('adminEmailForSignIn');
            alert('‚úÖ Admin access granted!');
            window.location.href = 'admin.html';
          })
          .catch((error) => {
            console.error('Error during sign-in:', error);
            alert('‚ùå Invalid or expired link. Please try again.');
          });
      }
    });




    // Load events content dynamically
    async function loadEventsContent() {
      const eventsContainer = document.getElementById('events-content');

      // Check if the events container exists
      if (!eventsContainer) {
        console.log('Events container not found - skipping events load');
        return;
      }

      try {
        const response = await fetch('features/events.html');
        const html = await response.text();
        eventsContainer.innerHTML = html;
      } catch (error) {
        eventsContainer.innerHTML = '<p style="color: #ff6b6b;">Unable to load events at the moment.</p>';
        console.error('Error loading events:', error);
      }
    }

    // Hamburger Menu Functionality
    window.toggleSidebar = function () {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('active');
    }

    // Close sidebar when clicking outside
    document.addEventListener('click', function (e) {
      const sidebar = document.getElementById('sidebar');
      const hamburger = document.querySelector('.hamburger');

      if (sidebar.classList.contains('active') &&
        !sidebar.contains(e.target) &&
        !hamburger.contains(e.target)) {
        sidebar.classList.remove('active');
      }
    });

    // Load events when page loads (only if events container exists)
    window.addEventListener('load', function () {
      loadEventsContent();
    });

    /* Opens Gmail‚Äôs compose screen addressed to abc@gmail.com */
    window.composeGmail = function () {
      window.open(
        "https://mail.google.com/mail/?view=cm&fs=1&to=darkseener45@gmail.com",
        "_blank",
        "noopener"
      );          // _blank ‚Üí new tab / window
    };

  </script>

</body>

</html>


