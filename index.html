<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>momin's adda</title>
    <link rel="stylesheet" href="style.css">
    <style>
        

        a:hover { color: aqua; }
        a:visited { color: white; }
        h2 { color: red; }
        li { color: aqua; }
    </style>
</head>
<body>
    <body style="background-image: url('image_bg_0.jpeg'); background-size: cover; background-position: center; background-repeat: no-repeat;"></body>
    <h1 style="color: green;">Welcome to Momin's Website</h1>
    <h2 style="color: aqua;">Guys, I am just learning web dev</h2>

    <footer>
        <h2>My Info:</h2>
        <ul>
            <li>Name: Momin Ali Mandal</li>
            <li>Age: 18+</li>
            <li>Class: 12th Completed</li>
            <li>Stream: Pure Science</li>
            <li>School Name: Hareknagar A.M Institute</li>
            <li>Relation Status: In a relation with <a href="https://www.instagram.com/yumikoeie">Yumiko</a></li>
        </ul>

        <h2>My Python Works (Apps):</h2>
        <a href='calculator.exe' download>Download Calculator.exe</a>
        <br><br>
        <a href='notepad.exe' download>Download Notepad.exe</a>
        <br><br>
        <a href='youtube_audio.exe' download>Download Youtube_Audio.exe</a>

        <h2>Contacts</h2>
        <a href="https://www.instagram.com/momin_ali_mandal">Instagram Account</a>
        <br>
        <a href="https://www.t.me/momin_ali_mandal">Telegram Me</a>
        <br><br>
        <p style="color: darkred;">&copy; Including all rights of Momin's gov.</p>
    </footer>

    <div>
        <h3 style="color: yellow;">You can send me anonymous messages:</h3>
        <input type="text" id="msgInput" placeholder="Type your message here">
        <button onclick="showMessage()">Send</button>
    </div>

    <script type="module">
    // ‚úÖ Debugging: Check if script runs
    console.log("Script Loaded!");

    // üõ† Import Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

    // üî• Firebase Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyDqJE28QQCt0KovRewpFWxgXd_7WIqmFEM",
        authDomain: "momin-chat-33997.firebaseapp.com",
        projectId: "momin-chat-33997",
        storageBucket: "momin-chat-33997.appspot.com",
        appId: "1:583120424404:web:79a60a30d07afadf5c9a41"
    };

    console.log("Firebase Config:", firebaseConfig);

    // üöÄ Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // üïí Function to Get Current Date and Time (Now Includes Seconds)
    function getCurrentDateTime() {
        let now = new Date();
        let dateParts = now.toISOString().split("T")[0].split("-");
        let formattedDate = `${dateParts[1]}-${dateParts[2]}`; // MM-DD format

        // Get time WITH seconds
        let options = { hour: "numeric", minute: "numeric", second: "numeric", hour12: true };
        let formattedTime = now.toLocaleTimeString(undefined, options); // HH:MM:SS AM/PM

        return { date: formattedDate, time: formattedTime };
    }

    // ‚úçÔ∏è Function to Save Messages to Firestore
    window.showMessage = async function () {
        let msg = document.getElementById("msgInput").value;
        let { date, time } = getCurrentDateTime(); // Get date & time separately

        if (msg.trim() === "") {
            alert("Please enter a message!");
            return;
        }

        try {
            await addDoc(collection(db, "messages"), {
                text: msg,
                date: date,  // ‚úÖ Adding a separate date field
                time: time   // ‚úÖ Storing time **with seconds** separately
            });

            console.log("‚úÖ Message saved:", date, time, msg);
            document.getElementById("msgInput").value = ""; // Clear input box
        } catch (error) {
            console.error("‚ùå Error saving message:", error);
        }
    };
</script>
</body>
</html>
